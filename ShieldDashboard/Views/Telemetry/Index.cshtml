@{
    ViewBag.Title = "Telemetry";
    ViewBag.ScriptsBundle = "~/bundles/js/telemetry";
}

@section datascript{
    <script>
        // Urls supported by this page
        var Url = {
            'GetActivityNames': "@Url.Action("GetActivityNames", "Telemetry")",
            'GetActivityTypesForName': "@Url.Action("GetActivityTypesForName", "Telemetry")",
            'GetActivitySubTypesForNameAndType': "@Url.Action("GetActivitySubTypesForNameAndType", "Telemetry")",
            'GetQuantileDurations': "@Url.Action("GetQuantileDurations", "Telemetry")"
        }
    </script>
}

@section templates
{
    @{ Html.RenderPartial("_Tmpl_PlotCanvas");}
}

<div id="TelemetryWrapper" class="container-fluid">
    <div id="QueryWrapper">
        <h2 class="headline">Acitivity durations in quantiles:</h2>
        <form id="QueryForm">
            <div class="col-xs-6">
                <div class="col-xs-12 form-group has-clear">
                    <label for="InputActivityName" class="control-label">ActivityName</label>
                    <input class="form-control" type="text" id="InputActivityName" list="ActivityNameList" value="@ViewBag.FirstActivity.Name"/>
                    <span class="form-control-clear glyphicon glyphicon-remove form-control-feedback hidden"></span>
                    <datalist id="ActivityNameList">
                        @foreach (var activityName in ViewBag.ActivityNames)
                        {
                            <option value="@activityName" />
                        }
                    </datalist>
                </div>
                <div class="form-group col-xs-6 has-clear">
                    <label for="InputActivityType" class="control-label">ActivityType</label>
                    <input class="form-control" type="text" id="InputActivityType" list="ActivityTypeList" value="@ViewBag.FirstActivity.Type"/>
                    <span class="form-control-clear glyphicon glyphicon-remove form-control-feedback hidden"></span>
                    <datalist id="ActivityTypeList"></datalist>
                </div>
                <div class="form-group col-xs-6 has-clear">
                    <label for="InputActivitySubType" class="control-label">ActivitySubType</label>
                    <input class="form-control" type="text" id="InputActivitySubType" list="ActivitySubTypeList" value="@ViewBag.FirstActivity.SubType"/>
                    <span class="form-control-clear glyphicon glyphicon-remove form-control-feedback hidden"></span>
                    <datalist id="ActivitySubTypeList"></datalist>
                </div>
            </div>
            <div class="col-xs-6">
                <div class="form-group col-xs-6">
                    <label class="control-label" for="InputSpotTime">SpotTime</label>
                    <input class="form-control" type="text" id="InputSpotTime" disabled="" value="@DateTime.UtcNow"/>
                </div>
                <div class="form-group col-xs-3">
                    <label class="control-label" for="InputLookingBack">LookingBack</label>
                    <input class="form-control" type="text" id="InputLookingBack" />
                </div>
                <div class="form-group col-xs-3 lookBackBtn">
                    <button type="button" id="LookBackBtn" class="btn btn-submit">LookBack</button>
                </div>
            </div>
            <div class="col-xs-6">
                <button type="submit" id="LoadBtn" class="btn btn-lg btn-submit">Load</button>
            </div>
        </form>
    </div>
    <div id="LoadingScreen">
        <div id="RequestSpinner"></div>
        <h2>Loading...</h2>
    </div>
    <div id="ErrorPlaceholder"></div>
    <div id="ResultsContainer" class="hidden">
        <h3 id="QualityOfServiceHeading">Quality of Service</h3>
        <div id="QualityOfServicePlaceholder"></div>
        <h3 id="TrafficHeading">Traffic</h3>
        <div id="TrafficPlaceholder"></div>
        <h3 id="DurationHeading">Durations [ms]</h3>
        <div id="DurationPlaceholder"></div>
    </div>
</div>
@Scripts.Render(ViewBag.ScriptsBundle)
